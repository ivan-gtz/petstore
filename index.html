<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caneko</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Favicon -->
    <link rel="icon" href="/vikey Mascotas. favicon.png" type="image/png">
    <!-- PWA Manifest for Installability -->
    <link rel="manifest" href="/manifest.json">
</head>
<body>

    <!-- Login Screen -->
    <div id="login-wrapper">
        <div class="login-container">
            <h1 id="login-heading">Bienvenido a <span id="app-name">Caneko</span></h1>
            <p>Inicia sesión para continuar.</p>
            <form id="login-form">
                <div class="form-group">
                    <label for="login-username">Email</label>
                    <input type="text" id="login-username" required placeholder="ejemplo@gmail.com">
                </div>
                <div class="form-group">
                    <label for="login-password">Contraseña</label>
                    <!-- Password input with toggle -->
                    <div class="password-input-container">
                        <input type="password" id="login-password" required placeholder="********">
                         <button type="button" id="toggle-password-visibility" class="password-toggle-button" aria-label="Toggle password visibility">
                            <svg class="eye-icon" id="eye-open" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M1 12s4-8 11-8s11 8 11 8s-4 8-11 8s-11-8-11-8z"></path>
                                <circle cx="12" cy="12" r="3"></circle>
                            </svg>
                            <svg class="eye-icon" id="eye-closed" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
                                <line x1="1" y1="1" x2="23" y2="23"></line>
                            </svg>
                        </button>
                    </div>
                    <!-- End Password input with toggle -->
                </div>
                 <p id="login-error-msg" class="error-message"></p>
                <button type="submit" class="save-btn">Iniciar Sesión</button>
            </form>
        </div>
    </div>

    <!-- Main App Wrapper (Hidden until logged in) -->
    <div id="app-wrapper" style="display: none;">
        <div class="page-wrapper">
            <div class="sidebar">
                <nav>
                    <ul>
                        <li>
                            <a href="#" data-target="panel-section">
                                <svg class="menu-icon" viewBox="0 0 24 24" width="24" height="24"
                                    fill="none" stroke="currentColor" stroke-width="1.6"
                                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <!-- Marco exterior -->
                                <rect x="2" y="3" width="20" height="18" rx="2" fill="none" />
                                <!-- Cuadrantes del panel (rellenos para mejor legibilidad a tamaños pequeños) -->
                                <rect x="4" y="5" width="6" height="6" rx="1" fill="currentColor" stroke="none"/>
                                <rect x="12" y="5" width="6" height="6" rx="1" fill="currentColor" stroke="none"/>
                                <rect x="4" y="13" width="6" height="6" rx="1" fill="currentColor" stroke="none"/>
                                <rect x="12" y="13" width="6" height="6" rx="1" fill="currentColor" stroke="none"/>
                                </svg>

                                <span class="menu-text">Panel</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" data-target="pets-section">
                            <svg class="menu-icon" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg">
                            <!-- Dedos -->
                            <ellipse cx="3.0" cy="8.5" rx="1.3" ry="1.8" transform="rotate(-15 3.0 8.5)" fill="currentColor"/> <!-- Primer dedo, más separado y pegado a la palma -->
                            <ellipse cx="7.0" cy="6.2" rx="1.7" ry="2.3" transform="rotate(0 7.0 6.2)" fill="currentColor"/> <!-- Segundo dedo -->
                            <ellipse cx="12.6" cy="6.4" rx="1.5" ry="2.0" transform="rotate(0 12.6 6.4)" fill="currentColor"/> <!-- Tercer dedo -->
                            <ellipse cx="19.0" cy="8.5" rx="1.3" ry="1.8" transform="rotate(15 19.0 8.5)" fill="currentColor"/> <!-- Cuarto dedo, pegado a la palma -->

                            <!-- Almohadilla central -->
                            <ellipse cx="11.8" cy="15" rx="5.2" ry="4.6" fill="currentColor"/>

                            <!-- Toque de volumen (opcional) -->
                            <path d="M10.2 14.2c0-1.2 1.1-2.6 1.8-3 .7-.4 2.1-.4 2.8 0 .7.4 1.6 1.8 1.6 3 0 1.2-1.1 2.5-2.8 2.5h-.6c-1.7 0-1.8-1.3-1.8-2.5z" fill="#000" opacity="0.06"/>
                            </svg>


                                <span class="menu-text">Mascotas</span>
                            </a>
                        </li>
                         <!-- New Clients Button -->
                        <li class="admin-only">
                            <a href="#" data-target="clients-section">
                             <svg class="menu-icon" viewBox="0 0 24 24" width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <!-- Cabezas -->
                                <circle cx="7.5" cy="7" r="2.6" fill="currentColor"/>
                                <circle cx="16.5" cy="7" r="2.4" fill="currentColor"/>

                                <!-- Cuerpos (más grandes y proporcionados) -->
                                <rect x="2.5" y="11" width="10" height="7.5" rx="2.8" ry="2.8" fill="currentColor"/>
                                <rect x="11.5" y="11" width="9"  height="7.5" rx="2.6" ry="2.6" fill="currentColor"/>

                                <!-- Toques para separar hombros/cabeza (pequeñas zonas transparentes) -->
                                <ellipse cx="7.5" cy="11.4" rx="3.3" ry="1.0" fill="#000" opacity="0.06"/>
                                <ellipse cx="16.5" cy="11.4" rx="3.0" ry="1.0" fill="#000" opacity="0.06"/>
                                </svg>

                                <span class="menu-text">Clientes</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" data-target="gallery-section">
                               <svg class="menu-icon" viewBox="0 0 24 24" width="24" height="24" fill="none"
                                    stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"
                                    xmlns="http://www.w3.org/2000/svg">
                                <!-- Capa posterior (sutil, para dar efecto de stack) -->
                                <rect x="4.2" y="5.2" width="15" height="11.2" rx="1.8" fill="currentColor" opacity="0.08" stroke="none"/>

                                <!-- Marco principal -->
                                <rect x="3" y="4" width="18" height="14" rx="2" fill="none"/>

                                <!-- Montaña / paisaje dentro del marco -->
                                <path d="M5 16.5 L9 11.2 L12.2 14.6 L15.8 9.8 L20.5 16.5 H5z" fill="currentColor" stroke="none"/>

                                <!-- Sol / luna -->
                                <circle cx="17.2" cy="8.2" r="1.4" fill="currentColor" stroke="none"/>

                                <!-- Mini-archivo en la esquina (sugerencia de varias imágenes) -->
                                <rect x="4.6" y="6.4" width="5.2" height="4.0" rx="0.9" fill="currentColor" opacity="0.12" stroke="none"/>
                                </svg>

                                <span class="menu-text">Galería</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" data-target="docs-section">
                               <svg class="menu-icon" viewBox="0 0 24 24" width="24" height="24" fill="none"
                                    stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"
                                    xmlns="http://www.w3.org/2000/svg">
                                <!-- Documento secundario detrás -->
                                <rect x="5.5" y="6.5" width="13" height="16" rx="1.8" fill="currentColor" opacity="0.08" stroke="none"/>

                                <!-- Documento principal -->
                                <rect x="3" y="4" width="15" height="20" rx="2" fill="none"/>

                                <!-- Líneas simulando texto -->
                                <line x1="6" y1="8" x2="16" y2="8" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>
                                <line x1="6" y1="12" x2="16" y2="12" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>
                                <line x1="6" y1="16" x2="14" y2="16" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>
                                </svg>

                                <span class="menu-text">Documentos</span>
                            </a>
                        </li>
                         <!-- Usuarios Section - Mark as admin-only -->
                        <li class="admin-only">
                            <a href="#" data-target="users-section">
                             <svg class="menu-icon" viewBox="0 0 24 24" width="24" height="24"
                                fill="none" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"
                                xmlns="http://www.w3.org/2000/svg">
                            <!-- Persona izquierda -->
                            <circle cx="7"  cy="6.5" r="2.4" fill="currentColor"/>                       <!-- cabeza -->
                            <rect   x="4"  y="10.5" width="6" height="7" rx="1.4" fill="none" stroke="currentColor"/> <!-- cuerpo -->
                            <!-- corbata izquierda -->
                            <path d="M7 11.0 L6.2 13.0 L7.8 13.0 Z" fill="currentColor"/>
                            <path d="M7 10.6 L7 11.4" stroke="currentColor" stroke-width="1" stroke-linecap="round"/>

                            <!-- Persona derecha (igual tamaño y alineada) -->
                            <circle cx="17" cy="6.5" r="2.4" fill="currentColor"/>                       <!-- cabeza -->
                            <rect   x="14" y="10.5" width="6" height="7" rx="1.4" fill="none" stroke="currentColor"/> <!-- cuerpo -->
                            <!-- corbata derecha -->
                            <path d="M17 11.0 L16.2 13.0 L17.8 13.0 Z" fill="currentColor"/>
                            <path d="M17 10.6 L17 11.4" stroke="currentColor" stroke-width="1" stroke-linecap="round"/>
                            </svg>

                                <span class="menu-text">Usuarios</span>
                            </a>
                        </li>
                         <!-- New "Control" Button - Admin Only -->
                        <li class="admin-only">
                             <a href="#" data-target="control-section">
                           <svg class="menu-icon" viewBox="0 0 24 24" width="24" height="24"
                                fill="none" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"
                                xmlns="http://www.w3.org/2000/svg">
                            <!-- Slider 1 -->
                            <line x1="3"  y1="6"  x2="21" y2="6"  />
                            <circle cx="9"  cy="6"  r="1.2" fill="currentColor" stroke="none"/>

                            <!-- Slider 2 -->
                            <line x1="3"  y1="12" x2="21" y2="12" />
                            <circle cx="14" cy="12" r="1.2" fill="currentColor" stroke="none"/>

                            <!-- Slider 3 -->
                            <line x1="3"  y1="18" x2="21" y2="18" />
                            <circle cx="6"  cy="18" r="1.2" fill="currentColor" stroke="none"/>
                            </svg>

                                 <span class="menu-text">Control</span>
                             </a>
                        </li>
                         <!-- New "Tarjeta" Button -->
                         <li>
                             <a href="#" id="open-card-link" data-target="tarjet">
                                <svg class="menu-icon" viewBox="0 0 24 24" width="24" height="24" fill="none"
                                    stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"
                                    xmlns="http://www.w3.org/2000/svg">
                                <!-- Tarjeta posterior (ligeramente desplazada para efecto de pila) -->
                                <rect x="4.6" y="6.6" width="15" height="10.4" rx="2" fill="currentColor" opacity="0.08" stroke="none"/>

                                <!-- Tarjeta principal -->
                                <rect x="2.8" y="4.8" width="18.4" height="12.4" rx="2" fill="none"/>

                                <!-- Chip -->
                                <rect x="4.6" y="8.0" width="3.0" height="2.2" rx="0.4" fill="currentColor"/>
                                <!-- Detalle interior del chip (sutil) -->
                                <rect x="5.1" y="8.4" width="0.5" height="1.4" rx="0.1" fill="#000" opacity="0.08"/>
                                <rect x="5.9" y="8.4" width="0.5" height="1.4" rx="0.1" fill="#000" opacity="0.08"/>
                                <rect x="6.7" y="8.4" width="0.5" height="1.4" rx="0.1" fill="#000" opacity="0.08"/>

                                <!-- Líneas simulando número y datos -->
                                <line x1="9.2" y1="9.6" x2="19.0" y2="9.6" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/>
                                <line x1="9.2" y1="12.0" x2="15.0" y2="12.0" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/>

                                <!-- Banda inferior (sugerencia de banda magnética / sombra) -->
                                <rect x="2.8" y="14.0" width="18.4" height="1.4" rx="0.6" fill="#000" opacity="0.06" stroke="none"/>
                                </svg>

                                 <span class="menu-text">Tarjeta</span>
                             </a>
                         </li>
                         <!-- Logout Button (Sidebar) -->
                        <li>
                            <a href="#" id="logout-button" data-target="logout">
                                <svg class="menu-icon" viewBox="0 0 24 24" width="24" height="24"
                                    fill="none" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"
                                    xmlns="http://www.w3.org/2000/svg">
                                <!-- Marco/puerta -->
                                <rect x="3" y="4" width="12" height="16" rx="2" fill="none"/>

                                <!-- Picaporte -->
                                <circle cx="8.5" cy="12" r="0.6" fill="currentColor" stroke="none"/>

                                <!-- Línea de salida y flecha -->
                                <path d="M21 12h-6" stroke="currentColor" stroke-width="1.6" fill="none"/>
                                <path d="M17.2 8.7 L21 12 L17.2 15.3" stroke="currentColor" stroke-width="1.6" fill="none"/>
                                </svg>

                                <span class="menu-text">Cerrar Sesión</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" data-target="settings-section">
                              <svg class="menu-icon" viewBox="0 0 24 24" width="24" height="24"
                                fill="none" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"
                                xmlns="http://www.w3.org/2000/svg">
                            <!-- Círculo central -->
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>

                            <!-- Dientes cuadrados alrededor -->
                            <rect x="11" y="0.5" width="2" height="4" fill="currentColor"/>
                            <rect x="11" y="19.5" width="2" height="4" fill="currentColor"/>
                            <rect x="0.5" y="11" width="4" height="2" fill="currentColor"/>
                            <rect x="19.5" y="11" width="4" height="2" fill="currentColor"/>
                            
                            <rect x="3.5" y="3.5" width="3" height="3" fill="currentColor" transform="rotate(45 5 5)"/>
                            <rect x="17.5" y="17.5" width="3" height="3" fill="currentColor" transform="rotate(45 19 19)"/>
                            <rect x="3.5" y="17.5" width="3" height="3" fill="currentColor" transform="rotate(45 5 19)"/>
                            <rect x="17.5" y="3.5" width="3" height="3" fill="currentColor" transform="rotate(45 19 5)"/>
                            </svg>

                                <span class="menu-text">Ajustes</span>
                            </a>
                        </li>

                    </ul>
                </nav>
            </div>
            <div class="main-content">
                <div class="container" id="content-area">

                    <!-- Panel Section -->
                    <section id="panel-section" class="content-section active">
                        <h1>
                            <a href="#" id="panel-website-link" target="_blank">
                                <img src="/logo Vikey Mascotas.png" alt="Caneko Logo" class="header-logo">
                                Caneko
                            </a>
                        </h1>
                        <div class="panel-pet-display">
                            <div class="panel-avatar-container">
                                <div class="avatar" id="panel-pet-avatar">
                                    <!-- Pet avatar or default SVG will be loaded here by JS -->
                                    <!-- Default SVG Template for Panel -->
                                    <svg viewBox="0 0 100 100" id="default-avatar-panel" style="display: none;">
                                        <circle cx="50" cy="50" r="45" fill="#ffd166"/>
                                        <circle cx="35" cy="40" r="5" fill="#333"/>
                                        <circle cx="65" cy="40" r="5" fill="#333"/>
                                        <path d="M35,60 Q50,70 65,60" stroke="#333" stroke-width="3" fill="none"/>
                                        <path d="M30,30 L20,10 M70,30 L80,10" stroke="#333" stroke-width="2"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="panel-info">
                                <p id="panel-pet-lost-status" class="lost-status" style="display: none;">
                                     <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="#dc3545" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-right: 5px;">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <line x1="12" y1="8" x2="12" y2="12"></line>
                                        <line x1="12" y1="16" x2="12.01" y2="16"></line>
                                     </svg>
                                     <strong style="color: #dc3545;">¡ESTA MASCOTA ESTÁ PERDIDA!</strong>
                                 </p>
                                <h2>Perfil de Mascota</h2>
                                <p id="panel-pet-name"><strong>Nombre:</strong> -</p>
                                <p id="panel-pet-breed"><strong>Raza:</strong> -</p>
                                <p id="panel-pet-sex"><strong>Sexo:</strong> -</p>
                                <p id="panel-pet-pedigree"><strong>Pedigrí:</strong> -</p>
                                <p id="panel-pet-sterilized"><strong>Esterilizado:</strong> -</p>
                                <p id="panel-pet-birthdate"><strong>Fecha de Nacimiento:</strong> -</p>
                                <p id="panel-pet-age"><strong>Edad:</strong> -</p>
                                <p id="panel-pet-color"><strong>Color:</strong> -</p>
                                <p id="panel-pet-notes"><strong>Notas:</strong> -</p>

                                <h2>Información del Dueño</h2>
                                <p id="panel-owner-name"><strong>Dueño:</strong> -</p>
                                <p id="panel-owner-phone"><strong>Teléfono:</strong> -</p>
                                <p id="panel-owner-location"><strong>Ubicación:</strong> -</p>
                            </div>
                            <div id="panel-no-data" style="display: none; text-align: center; color: #555;">
                                <p>Aún no has registrado a tu mascota.</p>
                                <p>Ve a la sección "Mascotas" para añadir una.</p>
                            </div>
                        </div>
                    </section>

                    <!-- Mascotas (Add/View/Edit Pet) Section -->
                    <section id="pets-section" class="content-section">
                        <h1>Gestionar Mascota</h1>

                        <div class="pet-profile">
                            <div class="avatar-container">
                                <div class="avatar" id="pet-avatar">
                                    <svg viewBox="0 0 100 100" id="default-avatar">
                                        <circle cx="50" cy="50" r="45" fill="#ffd166"/>
                                        <circle cx="35" cy="40" r="5" fill="#333"/>
                                        <circle cx="65" cy="40" r="5" fill="#333"/>
                                        <path d="M35,60 Q50,70 65,60" stroke="#333" stroke-width="3" fill="none"/>
                                        <path d="M30,30 L20,10 M70,30 L80,10" stroke="#333" stroke-width="2"/>
                                    </svg>
                                </div>
                                <input type="file" id="avatar-input" accept="image/*" style="display:none">
                                <button onclick="document.getElementById('avatar-input').click()" class="upload-btn">
                                    Cambiar Foto
                                </button>
                            </div>

                            <form id="pet-form">
                                <h2>Información de la Mascota</h2>
                                <div class="form-group">
                                    <label for="pet-name">Nombre</label>
                                    <input type="text" id="pet-name" required>
                                </div>

                                <div class="form-group">
                                    <label for="pet-breed">Raza</label>
                                    <input type="text" id="pet-breed" required>
                                </div>

                                 <div class="form-group">
                                    <label for="pet-sex">Sexo</label>
                                    <select id="pet-sex">
                                        <option value="">Selecciona...</option>
                                        <option value="macho">Macho</option>
                                        <option value="hembra">Hembra</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="pet-pedigree">Pedigrí</label>
                                    <select id="pet-pedigree">
                                        <option value="no">No</option>
                                        <option value="si">Si</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="pet-sterilized">Esterilizado</label>
                                    <select id="pet-sterilized">
                                        <option value="no">No</option>
                                        <option value="si">Si</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="pet-birthdate">Fecha de Nacimiento</label>
                                    <input type="date" id="pet-birthdate">
                                </div>

                                <div class="form-group">
                                    <label for="pet-age">Edad (años)</label>
                                    <input type="number" id="pet-age" min="0" required>
                                </div>

                                <div class="form-group">
                                    <label for="pet-color">Color</label>
                                    <input type="text" id="pet-color">
                                </div>

                                <div class="form-group">
                                    <label for="pet-notes">Notas adicionales</label>
                                    <textarea id="pet-notes" rows="3"></textarea>
                                </div>

                                <!-- Nuevo campo para Mascota Perdida -->
                                <div class="form-group lost-status-group">
                                    <label>Estado de la Mascota</label>
                                     <div class="lost-toggle-container">
                                        <input type="checkbox" id="pet-lost" hidden>
                                        <label for="pet-lost" class="lost-toggle-label">
                                            <span class="toggle-off">Marcar como Perdida</span>
                                            <span class="toggle-on">¡PERDIDA!</span>
                                        </label>
                                    </div>
                                </div>
                                <!-- Fin nuevo campo -->


                                 <h2>Información del Dueño</h2>
                                <div class="form-group">
                                    <label for="owner-name">Nombre del Dueño</label>
                                    <input type="text" id="owner-name">
                                </div>

                                <div class="form-group">
                                    <label for="owner-phone">Teléfono del Dueño</label>
                                    <input type="tel" id="owner-phone" placeholder="Ej: +34612345678">
                                </div>

                                <div class="form-group">
                                    <label for="owner-location">Ubicación del Dueño</label>
                                    <input type="text" id="owner-location" placeholder="Dirección o Enlace de Google Maps">
                                </div>


                                <button type="submit" class="save-btn">Guardar</button>
                            </form>
                        </div>
                    </section>

                    <!-- Galería Section -->
                    <section id="gallery-section" class="content-section">
                        <h1>Galería de Fotos</h1>
                        <p>Aquí podrás subir y ver fotos de tus mascotas.</p>
                        <div id="gallery-count-message" class="limit-message"></div>
                        <!-- New styled upload button + clear button wrapper -->
                        <div class="gallery-upload-wrapper">
                            <label for="gallery-upload" class="gallery-upload-btn" role="button" aria-label="Subir fotos">Subir Fotos</label>
                            <button type="button" id="gallery-clear-btn" class="gallery-upload-btn clear-btn" aria-label="Cancelar selección">Cancelar</button>
                        </div>
                        <input type="file" id="gallery-upload" accept="image/*" multiple>
                        <div id="gallery-previews"></div>
                    </section>

                    <!-- Documentos Section -->
                    <section id="docs-section" class="content-section">
                        <h1>Documentos</h1>
                        <p>Aquí podrás subir documentos relacionados con tus mascotas (vacunas, etc.).</p>
                        <div id="docs-count-message" class="limit-message"></div>
                        <!-- New styled upload area (label triggers hidden input) -->
                        <label for="docs-upload" class="docs-upload-area" role="button" aria-label="Subir documentos">
                            <svg viewBox="0 0 24 24" class="doc-upload-icon" width="44" height="44" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 15 16 10 5 21" stroke="currentColor" fill="none"/>
                                <circle cx="12" cy="12" r="3" fill="currentColor"/>
                            </svg>
                            <div class="docs-upload-text">
                                Arrastra aquí tus PDFs o haz clic para seleccionar<br>
                                <small>Soporte hasta 10 documentos • Solo PDF</small>
                            </div>
                        </label>
                        <input type="file" id="docs-upload" accept=".pdf" style="display:none">
                        <div id="docs-list" class="docs-list"></div>
                    </section>

                    <!-- Usuarios Section -->
                    <section id="users-section" class="content-section">
                        <h1>Gestionar Usuarios</h1>
                        <div id="users-admin-only">
                            <form id="user-form" class="simple-form">
                                <p>Añade usuarios manualmente:</p>
                                <div class="form-group">
                                    <label for="user-email-input">Correo Electrónico</label>
                                    <input type="email" id="user-email-input" required>
                                </div>
                                <div class="form-group">
                                    <label for="user-name-input">Nombre de Usuario</label>
                                    <input type="text" id="user-name-input" required>
                                </div>
                                <div class="form-group">
                                    <label for="user-password-input">Contraseña</label>
                                    <input type="password" id="user-password-input" required>
                                </div>
                                <button type="submit" class="save-btn">Añadir Usuario</button>
                            </form>
                            <!-- New Filter Controls for Users -->
                            <div class="filter-controls users-filter-controls">
                                <span>Filtrar usuarios:</span>
                                <button class="filter-button active" data-filter="all">Todos</button>
                                <button class="filter-button" data-filter="inactive">Inactivos</button>
                                <button class="filter-button" data-filter="expired">Caducados</button>
                            </div>
                            <!-- New Search Input -->
                            <div class="search-control users-search-control">
                                <label for="user-search-input">Buscar usuario:</label>
                                <div class="search-input-container">
                                    <input type="text" id="user-search-input" placeholder="Escribe para buscar...">
                                    <button type="button" id="user-search-button" class="save-btn">
                                         <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                            <circle cx="11" cy="11" r="8"></circle>
                                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                                         </svg>
                                    </button>
                                </div>
                            </div>
                            <div id="user-list" class="data-list">
                                <!-- User list will be displayed here -->
                                <!-- User entries will be generated by JS with: Name (Status), Start Date, Expiry Date, Pet Preview/Link, Toggle Status Button, Edit Dates Button, Delete Button -->
                            </div>
                        </div>
                        <div id="users-access-denied" style="display: none; text-align: center; color: red;">
                            <p>Acceso denegado. Esta sección es solo para administradores.</p>
                        </div>
                    </section>

                    <!-- New Control Section - Admin Only -->
                    <section id="control-section" class="content-section">
                        <h1>Control del Administrador</h1>
                        <p>Esta sección es solo para el administrador.</p>

                        <!-- Admin limits form -->
                        <form id="admin-limit-form" class="simple-form" style="max-width:480px; margin: 0 auto 20px;">
                            <div class="form-group">
                                <label for="gallery-limit-input">Límite de fotos por usuario</label>
                                <input type="number" id="gallery-limit-input" min="1" placeholder="Número máximo de fotos">
                            </div>
                            <div class="form-group">
                                <label for="docs-limit-input">Límite de documentos por usuario</label>
                                <input type="number" id="docs-limit-input" min="1" placeholder="Número máximo de documentos">
                            </div>
                            <p id="control-success-msg" class="success-message" style="display:none;"></p>
                            <p id="control-error-msg" class="error-message" style="display:none;"></p>
                            <button type="submit" class="save-btn">Guardar Límites</button>
                        </form>

                        <!-- Per-user preview: select a user to see current usage -->
                        <div style="max-width:640px; margin: 0 auto;">
                            <h2>Ver uso por usuario</h2>
                            <div class="form-group">
                                <label for="control-user-select">Selecciona usuario</label>
                                <select id="control-user-select"></select>
                            </div>
                            <div id="control-user-stats" style="margin-top:12px; text-align:center; color:var(--text-color-secondary);">
                                <p id="control-user-gallery-count">Fotos: —</p>
                                <p id="control-user-docs-count">Documentos: —</p>
                            </div>
                        </div>
                    </section>

                    <!-- Ajustes Section -->
                    <section id="settings-section" class="content-section">
                        <h1>Ajustes</h1>
                        <p>Configura tus preferencias aquí.</p>

                        <!-- Theme Setting -->
                        <div class="settings-group">
                            <h2>Tema de la Aplicación</h2>
                            <div class="form-group">
                                <label for="theme-toggle">Modo Oscuro</label>
                                <div class="theme-switch-container">
                                    <input type="checkbox" id="theme-toggle" hidden>
                                    <label for="theme-toggle" class="theme-switch-label"></label>
                                </div>
                            </div>
                        </div>

                        <!-- Basic User Settings (can be expanded later) -->
                        <div class="settings-group">
                            <h2>Ajustes de Usuario</h2>
                            <form id="settings-form">
                                <div class="form-group">
                                    <label for="user-name">Tu Nombre (Placeholder)</label>
                                    <input type="text" id="user-name">
                                </div>
                                <!-- Save settings button is hidden by CSS for this placeholder form -->
                                <button type="submit" class="save-btn">Guardar Ajustes</button>
                            </form>
                        </div>

                        <!-- Admin Settings (visible only for admin) -->
                        <div id="admin-settings" class="settings-group">
                            <h2>Ajustes de Administrador</h2>
                            <p>Cambia las credenciales del usuario administrador (<code>adminmas</code>).</p>
                            <form id="admin-settings-form" class="simple-form">
                                <div class="form-group">
                                    <label for="current-admin-password">Contraseña Actual de Admin</label>
                                    <input type="password" id="current-admin-password" required>
                                </div>
                                <div class="form-group">
                                    <label for="new-admin-password">Nueva Contraseña de Admin</label>
                                    <input type="password" id="new-admin-password" required>
                                </div>
                                <!-- New field for Admin Contact -->
                                <div class="form-group">
                                    <label for="admin-contact-number">Número de WhatsApp del Administrador</label>
                                    <input type="tel" id="admin-contact-number" placeholder="Ej: +34123456789">
                                </div>
                                <!-- New field for Admin Website -->
                                <div class="form-group">
                                    <label for="admin-website-input">Sitio Web Principal de Caneko</label>
                                    <input type="url" id="admin-website-input" placeholder="Ej: https://www.caneko.com">
                                </div>
                                <p id="admin-settings-error-msg" class="error-message"></p>
                                <p id="admin-settings-success-msg" class="success-message"></p>
                                <button type="submit" class="save-btn">Actualizar Ajustes Admin</button>
                            </form>
                        </div>

                        <!-- Admin Contact (Visible to all users) -->
                        <div id="admin-contact-settings" class="settings-group">
                            <h2>Contacto del Administrador</h2>
                            <p>Si necesitas ayuda o tienes alguna pregunta, puedes contactar al administrador.</p>
                            <div id="admin-whatsapp-button-container" style="text-align: center; margin-top: 20px;">
                                <!-- WhatsApp button will be added here by JS -->
                                <p id="admin-whatsapp-not-configured" style="display: none; color: var(--warning-color);">Contacto no configurado por el administrador.</p>
                            </div>
                        </div>

                        <!-- Main Website Link (Visible to all users) -->
                        <div id="main-website-settings" class="settings-group">
                            <h2>Sitio Web Principal</h2>
                            <p>Visita el sitio web principal de Caneko para más información.</p>
                            <div id="main-website-button-container" style="text-align: center; margin-top: 20px;">
                                <!-- Website button will be added here by JS -->
                                <p id="main-website-not-configured" style="display: none; color: var(--warning-color);">Sitio web no configurado por el administrador.</p>
                            </div>
                        </div>

                        <div style="margin-top: 40px; text-align: center;">
                            <button id="settings-logout-button" class="save-btn danger-btn">Cerrar Sesión</button>
                        </div>
                    </section>

                    <!-- New Clients Section -->
                    <section id="clients-section" class="content-section">
                        <h1>Gestionar Clientes</h1>
                        <p>Explora todas las mascotas registradas.</p>

                        <!-- Filter Controls -->
                        <div class="filter-controls">
                            <span>Filtrar por:</span>
                            <button class="filter-button active" data-filter="all">Todas</button>
                            <button class="filter-button" data-filter="lost">Perdidas</button>
                        </div>

                        <!-- Pet cards for all users will be displayed here -->
                        <div id="clients-list" class="pet-card-container">
                            <!-- Pet cards will be loaded here by JS -->
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </div>

    <!-- Custom Confirm Modal (for delete confirmations) -->
    <div id="confirmModal" class="confirm-modal" role="dialog" aria-modal="true" aria-hidden="true" style="display:none;">
        <div class="confirm-box" role="document" aria-labelledby="confirmTitle" aria-describedby="confirmMessage">
            <h3 id="confirmTitle" class="confirm-title">Confirmar</h3>
            <p id="confirmMessage" class="confirm-message">¿Estás seguro?</p>
            <div class="confirm-actions">
                <button class="confirm-no save-btn" type="button">Cancelar</button>
                <button class="confirm-yes danger-btn" type="button">Eliminar</button>
            </div>
        </div>
    </div>

    <div id="myModal" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content" id="modalImage">
        <!-- Or for documents, perhaps an iframe or text placeholder -->
        <div class="modal-document-content" id="modalDocument">
            <!-- Document content or placeholder/dynamic HTML will go here -->
            <!-- For Pet Card in Modal: content will be generated with class="modal-pet-card-container" -->
            <!-- For User Dates Edit Modal: content will be a form generated dynamically -->
        </div>
        <!-- Optional caption -->
        <!-- <div id="caption"></div> -->
    </div>

    <script type="module" src="app.js"></script>
</body>
</html>